# R1: Модель данных и API

> Связанные задачи WBS: A1, A2, A3 (структура заявки и список), B1 (роли – базовые атрибуты), C1 (формат зоны – черновик). Источник истины по полной декомпозиции: см. `WBS_Детализация.md`.

## 1. Введение

В данном документе описывается первая версия модели данных и спецификации API для проекта. Основное внимание уделяется ключевым сущностям, их атрибутам и взаимосвязям, а также основным операциям, которые будут поддерживаться API.

## 2. Модель данных

### 2.1. Ключевые сущности

- **Заявка**
  - ID (уникальный идентификатор)
  - Имя заявителя
  - Контакт (телефон)
  - Место (адрес или координаты)
  - Время последнего контакта
  - Описание
  - Приоритет (низкий/средний/высокий)
  - Статус (новая/в процессе/завершена)

- **Группа**
  - ID (уникальный идентификатор)
  - Название группы
  - Старший группы (ID участника)
  - Список участников (ID участников)
  - Зона поиска (ID зоны)

- **Зона поиска**
  - ID (уникальный идентификатор)
  - Название зоны
  - Описание (квадранты, риски)

- **Участник**
  - ID (уникальный идентификатор)
  - Имя
  - Роль (волонтёр/координатор/диспетчер)

### 2.2. Связи между сущностями

- Заявка может быть связана с одной или несколькими группами.
- Группа состоит из нескольких участников.
- Каждая группа назначается на определённую зону поиска.

## 3. Спецификация API

### 3.1. Основные операции

- **Создание заявки**
  - Метод: POST
  - URL: /api/requests
  - Тело запроса: JSON с данными заявки.

- **Получение списка заявок**
  - Метод: GET
  - URL: /api/requests
  - Параметры: фильтры по статусу, приоритету.

- **Обновление статуса заявки**
  - Метод: PATCH
  - URL: /api/requests/{id}
  - Тело запроса: JSON с обновлёнными данными.

### 3.2. Валидация данных

- Все обязательные поля должны быть заполнены.
- Формат телефона должен соответствовать заданному шаблону.
- Описание должно содержать минимум 20 символов.

### 3.3. Обработка ошибок

- 400 Bad Request: Неверный формат данных.
- 404 Not Found: Запрашиваемый ресурс не найден.
- 500 Internal Server Error: Ошибка на сервере.

## 4. Заключение

Данный документ служит основой для разработки модели данных и API. В дальнейшем будут добавлены дополнительные функции и улучшения на основе обратной связи от пользователей и заинтересованных сторон.

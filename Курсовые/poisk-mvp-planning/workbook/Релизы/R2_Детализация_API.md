# R2: Детализация API

> Связанные задачи WBS: A4–A8 (расширенные операции заявки), B2–B3 (проверка прав), D1 (формат отметок начала), E1 (журналирование – подготовка требований). Источник истины задач: `WBS_Детализация.md`.

## Введение

В данном документе описываются детали второго релиза проекта, который включает в себя уточнение спецификаций API и улучшения, основанные на обратной связи от первого релиза. Основное внимание уделяется деталям операций, валидации данных и обработке ошибок.

## Цели релиза

- Уточнить спецификации API на основе полученной обратной связи.
- Обеспечить четкие правила валидации для входящих данных.
- Определить обработку ошибок и соответствующие сообщения для пользователей.

## Операции API

### 1. Создание заявки

- **Метод:** POST
- **URL:** /api/requests
  - Имя заявителя (string, обязательное)
  - Контакт (string, обязательное, формат: +375/ +7 ...)
  - Место (string, обязательное)
  - Время последнего контакта (datetime, обязательное)
  - Описание (string, минимум 20 символов, обязательное)
  - Приоритет (string, одно из: низкий/средний/высокий, по умолчанию: средний)

### 2. Получение списка заявок

- **Метод:** GET
- **URL:** /api/requests
- **Параметры запроса:**
  - Статус (string, необязательный)
  - Приоритет (string, необязательный)

### 3. Обновление статуса заявки

- **Метод:** PATCH
- **URL:** /api/requests/{id}
- **Тело запроса:**
  - Новый статус (string, обязательное)

### 4. Закрытие заявки

- **Метод:** DELETE
- **URL:** /api/requests/{id}

## Валидация данных

- Все входящие данные должны проходить валидацию на уровне API.
- Ошибки валидации должны возвращать четкие сообщения об ошибках с указанием, какие поля некорректны.

## Обработка ошибок

- Все ошибки должны возвращать статус-код HTTP и сообщение об ошибке.
- Примеры ошибок:
  - 400 Bad Request: Неверный формат данных.
  - 404 Not Found: Заявка не найдена.
  - 500 Internal Server Error: Ошибка сервера.

## Заключение

Данный релиз направлен на улучшение взаимодействия с API, обеспечивая более четкие спецификации и обработку ошибок. Следующий этап включает в себя тестирование и интеграцию с фронтенд-частью проекта.
